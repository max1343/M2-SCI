package vue;

import java.awt.Canvas;
import java.awt.Color;
import java.awt.Graphics;
import java.util.ArrayList;
import java.util.Observable;
import java.util.Observer;

import model.Agent;
import model.Environment;
import particles.AgentParticles;

public class CanvasGrille extends Canvas implements Observer{
	private Environment e;
	private ArrayList<Agent> listeAgents;
	public boolean grid;
	public int cSizeX, cSizeY;
	private int type;
	
	public CanvasGrille(Environment env){
		this.e = env;
		this.setSize(cSizeX, cSizeY);
		//if(type == 2) 
			//this.setBackground(Color.CYAN);
	}
	
	
	public void paint(Graphics g){
		/** if(type==2)
			g.setColor(Color.WHITE);
		else
			g.setColor(Color.BLACK); **/
		
		if(this.grid == true){
			int x1 = 1 ;//this.getWidth()/e.width;
			int y1 = this.getHeight()/e.height;        
			for (int x= x1; x<this.getWidth(); x+=x1){
				g.drawLine(x, 0, x, this.getWidth());
			}
	    
		    for (int y= y1; y<this.getHeight(); y+=y1){
		    	g.drawLine(0, y, this.getHeight(),y);
		    }
		    
		}
		
		
		int tailleCaseX = this.cSizeX / e.height;
		int tailleCaseY = this.cSizeY / e.width;

		
		listeAgents = e.getAllBall();
		int posX, posY;
		for(Agent ag : listeAgents){
			posX = ag.getPosX()*getWidth()/e.height;
			posY = ag.getPosY()*getHeight()/e.width;
			g.setColor(ag.getColor());
			g.fillOval(posX, posY, tailleCaseX, tailleCaseY);
		}
	}

	

	@Override
	public void update(Observable o, Object arg) {
		this.setEnv((Environment) arg);
		repaint();
	}
	
	
	public void setEnv(Environment e){
		this.e = e;
		
	}


	public void setCSizeX(int parseInt) {
		this.cSizeX = parseInt;
	}
	
	public void setCSizeY(int parseInt) {
		this.cSizeY = parseInt;
	}
	
	public void setType(int t){
		this.type = t;
	}

}
